<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Sonic Jumper</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
        body {
            background: brown;
        }

        header {
            color: white;
            text-align: center;
            font-size: 20px;
        }
		.__container {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
		}
		#sonic {
            /* background-color: blue; */
            /* width: 800px; */
            /* height: 400px; */
		}
	</style>
</head>
<header>
    <h1>Sonic Jumper</h1>
</header>
<body>
    <div class="__container">
        <canvas id="sonic" style="width: 800px; height:400px;">
            </canvas>
        </div>
        <script>
        img = new Image();
        img.src = "./common/images/sonic.png";
        var canvas;
        canvas = document.getElementById("sonic");
		canvas.style.width = '800px';
		canvas.style.background = 'red';
        canvas.style.height = '400px';
        var x = 0;
        var y = 0;
        var ctx = canvas.getContext("2d");
        img.onload = function() {
            init();
        };
        const scale = .5;
        const width = 93;
        const height = 120;
        const scaledWidth = scale * width;
        const scaledHeight = scale * height;

        function drawFrame(frameX, frameY, canvasX, canvasY){
            ctx.drawImage(img, frameX*width, frameY*height,width, height,
                canvasX, canvasY, scaledWidth, scaledHeight);
        }
        function init() {
            drawFrame(0, 0, x, y);
        }
        // document.addEventListener("keyup", controls);
        // document.addEventListener("keydown", controls);
        document.addEventListener("keypress", controls);
        
        function controls(event) {
        if (event.key == 'a') {
            deplgauche(); }
        if (event.key == 'w') {
            deplhaut(); }
        if (event.key == 'd') {
            depldroite(); }
        if (event.key == 's') {
            deplbas(); }
        }
                    
        function depldroite() {
            if (x <= 280)
            {
                clear();
                x += 10;
                y += 0;
                display();
            }
            else
            {
                clear();
                x = -30;
                y += 0;
                display();
            }
        }

        function deplgauche() {
            if (x > 0)
            {
                clear();
                x -= 10;
                y += 0;
                display();
            }
            else
            {
                clear();
                x = 290;
                y += 0;
                display();
            }
        }

        function deplhaut() {
            if (y > 0)
            {
                clear();
                x += 0;
                y -= 10;
                display();
            } 
        }

        function deplbas() {
            if (y <= 80)
            {
                clear();
                x += 0;
                y += 10;
                display();
            }
        }

        function display() {
            drawFrame(0, 0, x, y);
        }

        function clear() {
            ctx.clearRect(x, y, 93, 120);
        }
        
        </script>
</body>


</html>